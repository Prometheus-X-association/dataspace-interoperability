"use strict";var gt=Object.create;var j=Object.defineProperty,lt=Object.defineProperties,ut=Object.getOwnPropertyDescriptor,ht=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertyNames,at=Object.getOwnPropertySymbols,yt=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var nt=(n,t,e)=>t in n?j(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,S=(n,t)=>{for(var e in t||(t={}))ot.call(t,e)&&nt(n,e,t[e]);if(at)for(var e of at(t))bt.call(t,e)&&nt(n,e,t[e]);return n},v=(n,t)=>lt(n,ht(t));var xt=(n,t)=>{for(var e in t)j(n,e,{get:t[e],enumerable:!0})},ct=(n,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ft(t))!ot.call(n,s)&&s!==e&&j(n,s,{get:()=>t[s],enumerable:!(a=ut(t,s))||a.enumerable});return n};var dt=(n,t,e)=>(e=n!=null?gt(yt(n)):{},ct(t||!n||!n.__esModule?j(e,"default",{value:n,enumerable:!0}):e,n)),Dt=n=>ct(j({},"__esModule",{value:!0}),n);var D=(n,t,e)=>new Promise((a,s)=>{var r=o=>{try{c(e.next(o))}catch(d){s(d)}},i=o=>{try{c(e.throw(o))}catch(d){s(d)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(r,i);c((e=e.apply(n,t)).next())});var Rt={};xt(Rt,{Catalog:()=>et,Checksum:()=>rt,ContractTemplate:()=>$,DSPDistribution:()=>x,DataCatalog:()=>k,DataOffering:()=>V,DataProduct:()=>L,DataProductUsageContract:()=>it,DataRepresentation:()=>A,DataResource:()=>C,DataSet:()=>T,DataTransaction:()=>st,DcatToPtxConvertor:()=>Z,Distribution:()=>P,GaiaXToPtxConvertor:()=>X,PtxToDcatConvertor:()=>Y,PtxToGaiaXConvertor:()=>G,PtxToSimplConvertor:()=>tt,Resource:()=>y,ServiceOffering:()=>_,SoftwareResource:()=>U});module.exports=Dt(Rt);var pt=dt(require("axios"));var y=class{toJSON(){return{"@id":this["@id"],"@context":this["@context"],"@type":this["@type"],"dcterms:title":this["dcterms:title"],"dcterms:description":this["dcterms:description"],"dcterms:accessRights":this["dcterms:accessRights"],"dcterms:conformsTo":this["dcterms:conformsTo"],"dcat:contactPoint":this["dcat:contactPoint"],"dcterms:creator":this["dcterms:creator"],"dcterms:issued":this["dcterms:issued"],"dcterms:modified":this["dcterms:modified"],"dcterms:language":this["dcterms:language"],"dcterms:publisher":this["dcterms:publisher"],"dcterms:identifier":this["dcterms:identifier"],"dcat:theme":this["dcat:theme"],"dcterms:type":this["dcterms:type"],"dcterms:relation":this["dcterms:relation"],"dcat:qualifiedRelation":this["dcat:qualifiedRelation"],"dcat:keyword":this["dcat:keyword"],"dcat:landingPage":this["dcat:landingPage"],"prov:qualifiedAttribution":this["prov:qualifiedAttribution"],"dcterms:license":this["dcterms:license"],"dcterms:rights":this["dcterms:rights"],"dcterms:hasPart":this["dcterms:hasPart"],"odrl:hasPolicy":this["odrl:hasPolicy"],"dcterms:isReferencedBy":this["dcterms:isReferencedBy"],"dcat:previousVersion":this["dcat:previousVersion"],"dcat:hasVersion":this["dcat:hasVersion"],"dcat:hasCurrentVersion":this["dcat:hasCurrentVersion"],"dcterms:replaces":this["dcterms:replaces"],"dcat:version":this["dcat:version"],"adms:versionNotes":this["adms:versionNotes"],"adms:status":this["adms:status"],"dcat:first":this["dcat:first"],"dcat:last":this["dcat:last"],"dcat:prev":this["dcat:prev"]}}};var L=class extends y{constructor(t){super(),Object.assign(this,t)}toJSON(){return v(S({},super.toJSON()),{"gx:providedBy":this["gx:providedBy"],"gx:termsAndConditions":this["gx:termsAndConditions"],"dct:license":this["dct:license"],"gx:title":this["gx:title"],"gx:description":this["gx:description"],"dct:issued":this["dct:issued"],"gx:obsoleteDateTime":this["gx:obsoleteDateTime"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":this["gx:dataUsageAgreement"],"gx:aggregationOf":this["gx:aggregationOf"],"dct:identifier":this["dct:identifier"]})}};var b=class extends y{toJSON(){return v(S({},super.toJSON()),{"dcat:distribution":this["dcat:distribution"],"dcterms:accrualPeriodicity":this["dcterms:accrualPeriodicity"],"dcat:inSeries":this["dcat:inSeries"],"dcterms:spatial":this["dcterms:spatial"],"dcat:spatialResolutionInMeters":this["dcat:spatialResolutionInMeters"],"dcterms:temporal":this["dcterms:temporal"],"dcat:temporalResolution":this["dcat:temporalResolution"]})}};var T=class extends b{constructor(t){super(),Object.assign(this,t)}toJSON(){var t;return v(S({},super.toJSON()),{"@type":this["@type"],"dcterms:title":this["dct:title"],"dcterms:description":this["dct:description"],"dct:title":this["dct:title"],"dct:description":this["dct:description"],"dct:distributions":this["dct:distributions"],"dct:identifier":this["dct:identifier"],"dct:issued":this["dct:issued"],"gx:expirationDateTime":this["gx:expirationDateTime"],"dct:license":this["dct:license"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":(t=this["gx:dataUsageAgreement"])==null?void 0:t.map(e=>e.toJSON()),"gx:exposedThrough":this["gx:exposedThrough"]})}};var H=class{constructor(t){this.account=t.account||""}};var E=class{constructor(t){this.name=t.name||"",this.homepage=t.homepage||""}};var F=class{constructor(t){this.name=t.name||"",this.homepage=t.homepage||""}};var R;(a=>{class n extends H{}a.Agent=n;class t extends E{}a.Person=t;class e extends F{}a.Organization=e})(R||(R={}));var x=class{toJSON(){return{"@id":this["@id"],"@type":this["@type"],"dcterms:title":this["dcterms:title"],"dcterms:description":this["dcterms:description"],"dcterms:issued":this["dcterms:issued"],"dcterms:modified":this["dcterms:modified"],"dcterms:license":this["dcterms:license"],"dcterms:accessRights":this["dcterms:accessRights"],"dcterms:rights":this["dcterms:rights"],"odrl:hasPolicy":this["odrl:hasPolicy"],"dcat:accessURL":this["dcat:accessURL"],"dcat:downloadURL":this["dcat:downloadURL"],"dcat:accessService":this["dcat:accessService"],"dcat:byteSize":this["dcat:byteSize"],"dcat:spatialResolutionInMeters":this["dcat:spatialResolutionInMeters"],"dcat:temporalResolution":this["dcat:temporalResolution"],"dcterms:conformsTo":this["dcterms:conformsTo"],"dcat:mediaType":this["dcat:mediaType"],"dcterms:format":this["dcterms:format"],"dcat:compressFormat":this["dcat:compressFormat"],"dcat:packageFormat":this["dcat:packageFormat"]}}};var P=class extends x{constructor(t){super(),Object.assign(this,t)}toJSON(){var t;return v(S({},super.toJSON()),{"dct:title":this["dct:title"],"dct:format":this["dct:format"],"gx:location":this["gx:location"],"gx:hash":this["gx:hash"],"gx:hashAlgorithm":this["gx:hashAlgorithm"],"dct:issued":this["dct:issued"],"gx:expirationDateTime":this["gx:expirationDateTime"],"dcat:language":this["dcat:language"],"dct:license":this["dct:license"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":(t=this["gx:dataUsageAgreement"])==null?void 0:t.map(e=>e.toJSON())})}};var q=class{};var J;(t=>{class n extends q{}t.Kind=n})(J||(J={}));var z=class extends b{toJSON(){return{"foaf:homepage":this["foaf:homepage"],"dcat:themeTaxonomy":this["dcat:themeTaxonomy"],"dcat:resource":this["dcat:resource"],"dcat:dataset":this["dcat:dataset"],"dcat:service":this["dcat:service"],"dcat:catalog":this["dcat:catalog"]}}};var k=class extends z{constructor(t){super(),this["gx-trust-framework:getVerifiableCredentialsIDs"]=t["gx-trust-framework:getVerifiableCredentialsIDs"]}toJSON(){return v(S({},super.toJSON()),{"gx-trust-framework:getVerifiableCredentialsIDs":this["gx-trust-framework:getVerifiableCredentialsIDs"]})}};var K=class{constructor(t){this.inScheme=new f.ConceptScheme({}),this.topConceptOf=new f.ConceptScheme({}),this.definition=t.definition}};var M=class{constructor(t){this.themes=t.themes||[],this.themeTaxonomy=t.themeTaxonomy||""}};var f;(e=>{class n extends K{}e.Concept=n;class t extends M{}e.ConceptScheme=t})(f||(f={}));var N=class extends y{};var G=class{mapDataResourceToDataSet(t){var s,r,i,c,o,d,l,p,g,w;let e=new T({"dct:distributions":[],"dct:identifier":t._id,"dct:description":t.description,"dct:issued":(s=t.createdAt)==null?void 0:s.toString(),"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":[],"gx:dataUsageAgreement":[],"gx:expirationDateTime":void 0,"gx:exposedThrough":[]});e["@id"]=t._id,e["odrl:hasPolicy"]=t.policy,e["@type"]="DataResource",e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:creator"]=new R.Agent({account:t.producedBy});let a=new f.ConceptScheme({themes:[],themeTaxonomy:""});if(e["dcat:theme"]=new f.Concept({inScheme:a,topConceptOf:a,definition:t.category}),t.representation){[].push((i=(r=t.representation)==null?void 0:r.url)!=null?i:"");let u=new P({"dcat:language":"","dct:format":"","dct:issued":t.representation.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.producedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region});u["@id"]=(c=t.representation)==null?void 0:c._id,u["@type"]="ptx:representation",u["dcterms:issued"]=(o=t.representation)==null?void 0:o.createdAt,u["dcterms:modified"]=(d=t.representation)==null?void 0:d.updatedAt,u["dcterms:accessRights"]=(l=t.representation)==null?void 0:l.method,u["dcterms:rights"]=(p=t.representation)==null?void 0:p.credential,u["dcat:mediaType"]=(g=t.representation)==null?void 0:g.type,u["dcat:accessURL"]=(w=t.representation)==null?void 0:w.url,e["dct:distributions"].push(u)}if(t.apiResponseRepresentation){let h=new P({"dcat:language":"","dct:format":"","dct:issued":t.apiResponseRepresentation.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.producedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region});h["@id"]=t.apiResponseRepresentation._id,h["@type"]="ptx:apiResponseRepresentation",h["dcterms:modified"]=t.apiResponseRepresentation.updatedAt,h["dcterms:accessRights"]=t.apiResponseRepresentation.method,h["dcterms:rights"]=t.apiResponseRepresentation.credential,h["dcat:mediaType"]=t.apiResponseRepresentation.type,e["dct:distributions"].push(h)}return e}mapSoftwareResourceToDataSet(t){var r;let e=new T({"dct:description":t.description,"dct:distributions":[],"dct:identifier":(r=t._id)!=null?r:"","dct:issued":t.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.providedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":void 0,"gx:exposedThrough":[]});e["@id"]=t._id,e["@type"]="SoftwareResource",e["dcterms:modified"]=t.updatedAt,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new R.Agent({account:t.providedBy});let a=new f.ConceptScheme({themes:[],themeTaxonomy:""});e["dcat:theme"]=new f.Concept({inScheme:a,topConceptOf:a,definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:hasPart"]=(t.aggregationOf||[]).map(i=>{let c=new T({"dct:description":"","dct:distributions":[],"dct:identifier":"","dct:title":"","gx:exposedThrough":[]});return c["@id"]=i,c});let s=t.locationAddress.map(i=>i.countryCode);if(e["dcterms:language"]=s.join(";"),t.representation){let i=new P({"dcat:language":"","dct:format":"","dct:issued":"","dct:license":[],"dct:title":"","gx:dataLicensors":[],"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region||[]});i["@id"]=t.representation._id,i["@type"]="ptx:representation",i["dcat:accessURL"]=t.representation.url,i["dcterms:modified"]=t.representation.updatedAt,i["dcterms:accessRights"]=t.representation.method,i["dcterms:rights"]=t.representation.credential,i["dcat:mediaType"]=t.representation.type,e["dct:distributions"].push(i)}return e}mapServiceOfferingToDataProduct(t){return D(this,null,function*(){var c,o,d,l,p,g,w,h;let e=new R.Agent({account:(c=t.providedBy)!=null?c:""});e.account=(o=t.providedBy)!=null?o:"";let a=new J.Kind;a.url=(d=t.dependsOn)!=null?d:"";let s=[],r=[];for(let u of t.aggregationOf){let O=yield pt.default.get(u),I=new N;if(I["dcat:hadRole"]=O.data["@type"],I["dcterms:relation"]=u,I["dcterms:description"]=O.data.description,r.push(I),O.data["@type"]==="DataResource"){let m=this.mapDataResourceToDataSet(O.data);s.push(m)}else{let m=this.mapSoftwareResourceToDataSet(O.data);s.push(m)}}let i=new L({"dct:identifier":(l=t._id)!=null?l:"","dct:license":[],"gx:aggregationOf":s,"gx:providedBy":(p=t.providedBy)!=null?p:"","gx:termsAndConditions":t.termsAndConditions,"gx:title":(g=t.name)!=null?g:"","gx:description":(w=t.description)!=null?w:"","odrl:hasPolicy":t.policy,"dct:issued":t.createdAt,"dcat:contactPoint":a,"dcterms:conformsTo":t.termsAndConditions,"gx:obsoleteDateTime":void 0,"gx:dataLicensors":[],"gx:dataUsageAgreement":[]});return i["@type"]="ServiceOffering",i["dcterms:modified"]=t.updatedAt,i["dcat:version"]=t.schema_version,i["dcat:keyword"]=t.keywords.join(";")&&t.category.join(";"),i["gx:aggregationOf"]=s,i["dcterms:creator"]=e,i["dcat:qualifiedRelation"]=r,i["dcterms:creator"]=new R.Agent({account:(h=t.providedBy)!=null?h:""}),i["dcat:contactPoint"]=new J.Kind,i["dcat:contactPoint"].url=t.dependsOn,i["dcterms:conformsTo"]=t.termsAndConditions,i})}mapServiceOfferings(t){return D(this,null,function*(){let e=[];for(let a of t)e.push(yield this.mapServiceOfferingToDataProduct(a));return e})}mapResources(t,e){let a=[];for(let s of t)a.push(this.mapDataResourceToDataSet(s));for(let s of e)a.push(this.mapSoftwareResourceToDataSet(s));return a}mapPtxCatalogToGaiaXCatalog(t){return D(this,null,function*(){let e=t.filter(i=>{var c;return((c=i["@type"])==null?void 0:c.toLowerCase())==="serviceoffering"}),a=t.filter(i=>{var c;return((c=i["@type"])==null?void 0:c.toLowerCase())==="dataresource"}),s=t.filter(i=>{var c;return((c=i["@type"])==null?void 0:c.toLowerCase())==="softwareresource"}),r=new k({"gx-trust-framework:getVerifiableCredentialsIDs":t.map(i=>i._id).join(",")});return r["@context"]="https://w3id.org/dspace/2024/1/context.json",r["@type"]="dcat:Catalog",r["dcat:resource"]=yield this.mapServiceOfferings(e),r["dcat:dataset"]=this.mapResources(a,s),r["foaf:homepage"]="catalog/offers",r})}};var C=class{constructor(t){Object.assign(this,t)}toJSON(){return{representation:this.representation,apiResponseRepresentation:this.apiResponseRepresentation,createdAt:this.createdAt,updatedAt:this.updatedAt,name:this.name,description:this.description,license:this.license,policy:this.policy,producedBy:this.producedBy,schema_version:this.schema_version,country_or_region:this.country_or_region,copyrightOwnedBy:this.copyrightOwnedBy,category:this.category,subCategories:this.subCategories,exposedThrough:this.exposedThrough}}};var U=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,representation:this.representation,apiResponseRepresentation:this.apiResponseRepresentation,createdAt:this.createdAt,updatedAt:this.updatedAt,name:this.name,description:this.description,license:this.license,policy:this.policy,schema_version:this.schema_version,country_or_region:this.country_or_region,copyrightOwnedBy:this.copyrightOwnedBy,category:this.category,subCategories:this.subCategories,exposedThrough:this.exposedThrough,providedBy:this.providedBy,aggregationOf:this.aggregationOf,locationAddress:this.locationAddress,demo_link:this.demo_link}}};var _=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,name:this.name,providedBy:this.providedBy,description:this.description,createdAt:this.createdAt,updatedAt:this.updatedAt,schema_version:this.schema_version,policy:this.policy,keywords:this.keywords,category:this.category,dataResources:this.dataResources,softwareResources:this.softwareResources,location:this.location,aggregationOf:this.aggregationOf,dependsOn:this.dependsOn,termsAndConditions:this.termsAndConditions}}};var A=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,type:this.type,resourceID:this.type,url:this.url,method:this.method,credential:this.credential,createdAt:this.createdAt,updatedAt:this.updatedAt}}};var X=class{mapDataSetToDataResource(t){var s,r;if(!t["@id"])throw new Error("dataSet must have an @id property");let e=new C({_id:t["dct:identifier"],name:t["dct:title"],description:t["dct:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],license:t["dct:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],producedBy:(s=t["dcterms:creator"])==null?void 0:s.account,category:(r=t["dcat:theme"])==null?void 0:r.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["gx:exposedThrough"]}),a=t["dct:distributions"];if(Array.isArray(a))for(let i of a){let c=new A({_id:i["@id"],resourceID:t["@id"],url:Array.isArray(i["dcat:accessURL"])?i["dcat:accessURL"][0]:i["dcat:accessURL"],createdAt:i["dct:issued"],updatedAt:i["dcterms:modified"],method:i["dcterms:accessRights"],credential:i["dcterms:rights"],type:i["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=c):e.representation=c}return e}mapDataSetToSoftwareResource(t){var s,r;if(!t["@id"])throw new Error("resource must have an @id property");let e=new U({_id:t["@id"],name:t["dct:title"],description:t["dct:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],license:t["dct:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(s=t["dcterms:creator"])==null?void 0:s.account,category:(r=t["dcat:theme"])==null?void 0:r.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["gx:exposedThrough"]}),a=t["dct:distributions"];if(Array.isArray(a))for(let i of a){let c=new A({_id:i["@id"],resourceID:t["@id"],url:Array.isArray(i["dcat:accessURL"])?i["dcat:accessURL"][0]:i["dcat:accessURL"],createdAt:i["dct:issued"],updatedAt:i["dcterms:modified"],method:i["dcterms:accessRights"],credential:i["dcterms:rights"],type:i["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=c):e.representation=c}return e}mapDataProductToServiceOffering(t){return D(this,null,function*(){var s,r;if(!t["@id"])throw new Error("resource must have an @id property");let e=new _({_id:t["@id"],name:t["gx:title"],description:t["gx:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(s=t["dcterms:creator"])==null?void 0:s.account,category:(r=t["dcat:theme"])==null?void 0:r.definition,termsAndConditions:t["dcterms:conformsTo"]});e.dataResources=[],e.softwareResources=[];let a=t["gx:aggregationOf"];if(Array.isArray(a))for(let i of a)if(i["@type"]==="DataResource"){let c=this.mapDataSetToDataResource(i);e.dataResources.push(c)}else{let c=this.mapDataSetToSoftwareResource(i);e.softwareResources.push(c)}return e})}mapGaiaXCatalogToPtxCatalog(t){return D(this,null,function*(){let e=[],a=[],s=[];if(t["dcat:resource"]&&Array.isArray(t["dcat:resource"]))for(let r of t["dcat:resource"]){let i=yield this.mapDataProductToServiceOffering(r);e.push(i)}if(t["dcat:dataset"]&&Array.isArray(t["dcat:dataset"]))for(let r of t["dcat:dataset"]){let i;r["@type"]==="DataResource"?(i=this.mapDataSetToDataResource(r),a.push(i)):(i=this.mapDataSetToSoftwareResource(r),s.push(i))}return{serviceOfferings:e,dataResources:a,softwareResources:s}})}};var mt=dt(require("axios"));var B=class extends y{};var Q=class{constructor(t){this.url=t.url}};var W;(t=>{class n extends Q{}t.Kind=n})(W||(W={}));var Y=class{mapDataResourceToDataService(t){var a,s,r,i,c,o,d,l,p,g,w,h,u,O;let e=new B;if(e["@id"]=t._id,e["@type"]="DataResource",e["dcterms:title"]=t.name,e["dcterms:description"]=t.description,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcterms:license"]=t.license,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new R.Agent({account:t.producedBy}),e["dcat:theme"]=new f.Concept({definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcat:endpointURL"]=t.exposedThrough,e["dcat:servesDataset"]=[],t.representation){let I=new b,m=new x;m["dcat:accessURL"]=(a=t.representation)==null?void 0:a.url,m["@id"]=(s=t.representation)==null?void 0:s._id,m["@type"]="ptx:representation",m["dcterms:issued"]=(r=t.representation)==null?void 0:r.createdAt,m["dcterms:modified"]=(i=t.representation)==null?void 0:i.updatedAt,m["dcterms:accessRights"]=(c=t.representation)==null?void 0:c.method,m["dcterms:rights"]=(o=t.representation)==null?void 0:o.credential,m["dcat:mediaType"]=(d=t.representation)==null?void 0:d.type,I["dcat:distribution"]=m,e["dcat:servesDataset"].push(I)}if(t.apiResponseRepresentation){let I=new b,m=new x;m["dcat:accessURL"]=(l=t.apiResponseRepresentation)==null?void 0:l.url,m["@id"]=(p=t.apiResponseRepresentation)==null?void 0:p._id,m["@type"]="ptx:apiResponseRepresentation",m["dcterms:issued"]=(g=t.apiResponseRepresentation)==null?void 0:g.createdAt,m["dcterms:modified"]=(w=t.apiResponseRepresentation)==null?void 0:w.updatedAt,m["dcterms:accessRights"]=(h=t.apiResponseRepresentation)==null?void 0:h.method,m["dcterms:rights"]=(u=t.apiResponseRepresentation)==null?void 0:u.credential,m["dcat:mediaType"]=(O=t.apiResponseRepresentation)==null?void 0:O.type,I["dcat:distribution"]=m,e["dcat:servesDataset"].push(I)}return e}mapSoftwareResourceToDataService(t){var s,r,i,c,o,d,l;let e=new B;e["@id"]=t._id,e["@type"]="SoftwareResource",e["dcterms:title"]=t.name,e["dcterms:description"]=t.description,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcterms:license"]=t.license,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new R.Agent({account:t.providedBy}),e["dcat:theme"]=new f.Concept({definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:hasPart"]=(t.aggregationOf||[]).map(p=>{let g=new b;return g["@id"]=p,g});let a=t.locationAddress.map(p=>p.countryCode);if(e["dcterms:language"]=a.join(";"),e["dcat:endpointURL"]=t.exposedThrough,e["dcat:endpointDescription"]=t.demo_link,e["dcat:servesDataset"]=[],t.representation){let p=new b,g=new x;g["dcat:accessURL"]=(s=t.representation)==null?void 0:s.url,g["@id"]=(r=t.representation)==null?void 0:r._id,g["@type"]="ptx:representation",g["dcterms:issued"]=(i=t.representation)==null?void 0:i.createdAt,g["dcterms:modified"]=(c=t.representation)==null?void 0:c.updatedAt,g["dcterms:accessRights"]=(o=t.representation)==null?void 0:o.method,g["dcterms:rights"]=(d=t.representation)==null?void 0:d.credential,g["dcat:mediaType"]=(l=t.representation)==null?void 0:l.type,p["dcat:distribution"]=g,e["dcat:servesDataset"].push(p)}return e}mapServiceOfferingToDataSet(t){return D(this,null,function*(){var r,i,c;let e=new b,a=[],s=[];for(let o of t.aggregationOf){let d=yield mt.default.get(o),l=new N;if(l["dcat:hadRole"]=d.data["@type"],l["dcterms:relation"]=o,l["dcterms:description"]=d.data.description,s.push(l),d.data.representation){let p=new x;p["dcat:accessURL"]=d.data.representation.url,p["dcat:mediaType"]=d.data.representation.fileType,p["dcat:accessService"]=d.data["@type"]==="SoftwareResource"?this.mapSoftwareResourceToDataService(d.data):d.data["@type"]==="DataResource"?this.mapDataResourceToDataService(d.data):new B,a.push(p)}if(d.data.apiResponseRepresentation){let p=new x;p["dcat:accessURL"]=d.data.apiResponseRepresentation.url,p["dcat:mediaType"]=d.data.apiResponseRepresentation.fileType,p["dcat:accessService"]=d.data["@type"]==="SoftwareResource"?this.mapSoftwareResourceToDataService(d.data):d.data["@type"]==="DataResource"?this.mapDataResourceToDataService(d.data):new B,a.push(p)}}return e["@id"]=t._id,e["@type"]="ServiceOffering",e["dcterms:title"]=(r=t.name)!=null?r:"",e["dcterms:description"]=(i=t.description)!=null?i:"",e["dcterms:identifier"]=t._id,e["odrl:hasPolicy"]=t.policy,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcat:version"]=t.schema_version,e["dcat:keyword"]=t.keywords.join(";")&&t.category.join(";"),e["dcterms:hasPart"]=t.aggregationOf,e["dcat:distribution"]=a,e["dcat:qualifiedRelation"]=s,e["dcterms:creator"]=new R.Agent({account:(c=t.providedBy)!=null?c:""}),e["dcterms:spatial"]=t.location,e["dcat:contactPoint"]=new W.Kind(t.dependsOn),e["dcterms:conformsTo"]=t.termsAndConditions,e})}mapServiceOfferings(t){return D(this,null,function*(){let e=[];for(let a of t)e.push(yield this.mapServiceOfferingToDataSet(a));return e})}mapResources(t,e){let a=[];for(let s of t)a.push(this.mapDataResourceToDataService(s));for(let s of e)a.push(this.mapSoftwareResourceToDataService(s));return a}mapPtxCatalogToDcatCatalog(t){return D(this,null,function*(){let e=t.filter(r=>{var i;return((i=r["@type"])==null?void 0:i.toLowerCase())==="serviceoffering"}),a=t.filter(r=>{var i;return((i=r["@type"])==null?void 0:i.toLowerCase())==="dataresource"}),s=t.filter(r=>{var i;return((i=r["@type"])==null?void 0:i.toLowerCase())==="softwareresource"});return{"@context":"https://w3id.org/dspace/2024/1/context.json","@type":"dcat:Catalog","dcat:dataset":yield this.mapServiceOfferings(e),"dcat:service":this.mapResources(a,s),"foaf:homepage":"catalog/offers"}})}};var Z=class{mapDataServiceToDataResource(t){var s,r,i;if(!t["@id"])throw new Error("DataService must have an @id property");let e=new C({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],license:t["dcterms:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],producedBy:(s=t["dcterms:creator"])==null?void 0:s.account,category:(r=t["dcat:theme"])==null?void 0:r.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["dcat:endpointURL"]}),a=(i=t["dcat:servesDataset"])!=null?i:[];for(let c of a){let o=c["dcat:distribution"];if(!o)continue;if(Array.isArray(o))throw new Error("Distribution cannot be an array");let d=new A({_id:o["@id"],resourceID:t["@id"],url:Array.isArray(o["dcat:accessURL"])?o["dcat:accessURL"][0]:o["dcat:accessURL"],createdAt:o["dcterms:issued"],updatedAt:o["dcterms:modified"],method:o["dcterms:accessRights"],credential:o["dcterms:rights"],type:o["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=d):e.representation=d}return e}mapDataServiceToSoftwareResource(t){var s,r,i;if(!t["@id"])throw new Error("DataService must have an @id property");let e=new U({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],license:t["dcterms:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(s=t["dcterms:creator"])==null?void 0:s.account,category:(r=t["dcat:theme"])==null?void 0:r.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["dcat:endpointURL"]}),a=(i=t["dcat:servesDataset"])!=null?i:[];for(let c of a){let o=c["dcat:distribution"];if(!o)continue;if(Array.isArray(o))throw new Error("Distribution cannot be an array");let d=new A({_id:o["@id"],resourceID:t["@id"],url:Array.isArray(o["dcat:accessURL"])?o["dcat:accessURL"][0]:o["dcat:accessURL"],createdAt:o["dcterms:issued"],updatedAt:o["dcterms:modified"],method:o["dcterms:accessRights"],credential:o["dcterms:rights"],type:o["dcat:mediaType"]});e.representation||(e.representation=d)}return e}mapDataSetToServiceOffering(t){var a,s;let e=new _({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],policy:t["odrl:hasPolicy"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],schema_version:t["dcat:version"],keywords:t["dcat:keyword"],aggregationOf:t["dcterms:hasPart"]});if(Array.isArray(e.aggregationOf))e.aggregationOf=e.aggregationOf.map(r=>r["@id"]);else{let r=e.aggregationOf["@id"];e.aggregationOf=[],e.aggregationOf.push(r)}return e.providedBy=(a=t["dcterms:creator"])==null?void 0:a.account,e.location=t["dcterms:spatial"],e.dependsOn=(s=t["dcat:contactPoint"])==null?void 0:s.url,e.termsAndConditions=t["dcterms:conformsTo"],e}mapDcatCatalogToPtxCatalog(t){let e=[],a=[],s=[];if(t["dcat:dataset"]&&Array.isArray(t["dcat:dataset"]))for(let r of t["dcat:dataset"]){let i=this.mapDataSetToServiceOffering(r);e.push(i)}if(t["dcat:service"])for(let r of t["dcat:service"]){let i;r["@type"]==="DataResource"?(i=this.mapDataServiceToDataResource(r),a.push(i)):(i=this.mapDataServiceToSoftwareResource(r),s.push(i))}return{serviceOfferings:e,dataResources:a,softwareResources:s}}};var $=class{constructor(t){Object.assign(this,t)}};var V=class{constructor(t){Object.assign(this,t)}toJSON(){return JSON.stringify(this,null,2)}};var tt=class{mapDataOfferingToDataResource(t){var s;if(!t._id)throw new Error("DataResource must have an _id property");let e=t.policy.filter(r=>r.policy.permission.some(i=>i.action==="use")),a=t.policy.filter(r=>r.policy.permission.some(i=>i.action==="access"));return new V({"@context":{"gax-validation":"https://w3id.org/gaia-x/validation#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",sh:"http://www.w3.org/ns/shacl#",simpl:"https://w3id.org/simpl#",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#"},"@id":t._id,"rdf:type":{"@id":"simpl:DataOffering"},"simpl:billingSchema":{"@type":{"@id":"simpl:BillingSchema"},"simpl:billingSchemaDocument":"","simpl:billingSchemaHashAlg":"","simpl:billingSchemaHashValue":"","simpl:billingSchemaURL":""},"simpl:contractTemplate":{"@type":{"@id":"simpl:ContractTemplate"},"simpl:contractTemplateDocument":"","simpl:contractTemplateHashAlg":"","simpl:contractTemplateHashValue":"","simpl:contractTemplateURL":""},"simpl:dataProperties":{"@type":{"@id":"simpl:DataProperties"},"simpl:format":"","simpl:providerDataAddress":""},"simpl:generalServiceProperties":{"@type":{"@id":"simpl:GeneralServiceProperties"},"simpl:description":t.description||"","simpl:inLanguage":"en","simpl:name":t.name||"","simpl:offeringType":"DataOffering","simpl:serviceAccessPoint":{"@type":"xsd:anyURI","@value":t.exposedThrough||""}},"simpl:offeringPrice":{"@type":{"@id":"simpl:OfferingPrice"},"simpl:currency":"EUR","simpl:license":{"@type":"xsd:anyURI","@value":((s=t.license)==null?void 0:s[0])||""},"simpl:price":{"@type":"xsd:decimal","@value":0},"simpl:priceType":"Free"},"simpl:providerInformation":{"@type":{"@id":"simpl:ProviderInformation"},"simpl:contact":"","simpl:providedBy":t.producedBy||"","simpl:signature":""},"simpl:servicePolicy":{"@type":{"@id":"simpl:ServicePolicy"},"simpl:access-policy":JSON.stringify(a)||"","simpl:usage-policy":JSON.stringify(e)||""},"simpl:slaAgreements":{"@type":{"@id":"simpl:SlaAgreements"},"simpl:slaAgreementsDocument":"","simpl:slaAgreementsHashAlg":"","simpl:slaAgreementsHashValue":"","simpl:slaAgreementsURL":""}})}};var et=class{constructor(t){Object.assign(this,t)}toJSON(){return{endpoint:this.endpoint,resourceId:this.resourceId,type:this.type,enabled:this.enabled}}};var it=class{constructor(t){Object.assign(this,t)}toJSON(){return{"gx:providedBy":this["gx:providedBy"],"gx:consumedBy":this["gx:consumedBy"],"gx:dataProduct":this["gx:dataProduct"],"gx:signers":this["gx:signers"].map(t=>t.toJSON()),"gx:termOfUsage":this["gx:termOfUsage"],"gx:notarizedIn":this["gx:notarizedIn"],"gx:dataUsage":this["gx:dataUsage"]}}};var st=class{constructor(t){Object.assign(this,t)}toJSON(){return{"gx:dataProductUsageContract":this["gx:dataProductUsageContract"],"gx:dataUsage":this["gx:dataUsage"]}}};var rt=class{};0&&(module.exports={Catalog,Checksum,ContractTemplate,DSPDistribution,DataCatalog,DataOffering,DataProduct,DataProductUsageContract,DataRepresentation,DataResource,DataSet,DataTransaction,DcatToPtxConvertor,Distribution,GaiaXToPtxConvertor,PtxToDcatConvertor,PtxToGaiaXConvertor,PtxToSimplConvertor,Resource,ServiceOffering,SoftwareResource});
//# sourceMappingURL=index.js.map