var ot=Object.defineProperty,ct=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var at=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var nt=(o,t,e)=>t in o?ot(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))pt.call(t,e)&&nt(o,e,t[e]);if(at)for(var e of at(t))mt.call(t,e)&&nt(o,e,t[e]);return o},y=(o,t)=>ct(o,dt(t));var D=(o,t,e)=>new Promise((a,r)=>{var s=c=>{try{n(e.next(c))}catch(d){r(d)}},i=c=>{try{n(e.throw(c))}catch(d){r(d)}},n=c=>c.done?a(c.value):Promise.resolve(c.value).then(s,i);n((e=e.apply(o,t)).next())});import gt from"axios";var R=class{toJSON(){return{"@id":this["@id"],"@context":this["@context"],"@type":this["@type"],"dcterms:title":this["dcterms:title"],"dcterms:description":this["dcterms:description"],"dcterms:accessRights":this["dcterms:accessRights"],"dcterms:conformsTo":this["dcterms:conformsTo"],"dcat:contactPoint":this["dcat:contactPoint"],"dcterms:creator":this["dcterms:creator"],"dcterms:issued":this["dcterms:issued"],"dcterms:modified":this["dcterms:modified"],"dcterms:language":this["dcterms:language"],"dcterms:publisher":this["dcterms:publisher"],"dcterms:identifier":this["dcterms:identifier"],"dcat:theme":this["dcat:theme"],"dcterms:type":this["dcterms:type"],"dcterms:relation":this["dcterms:relation"],"dcat:qualifiedRelation":this["dcat:qualifiedRelation"],"dcat:keyword":this["dcat:keyword"],"dcat:landingPage":this["dcat:landingPage"],"prov:qualifiedAttribution":this["prov:qualifiedAttribution"],"dcterms:license":this["dcterms:license"],"dcterms:rights":this["dcterms:rights"],"dcterms:hasPart":this["dcterms:hasPart"],"odrl:hasPolicy":this["odrl:hasPolicy"],"dcterms:isReferencedBy":this["dcterms:isReferencedBy"],"dcat:previousVersion":this["dcat:previousVersion"],"dcat:hasVersion":this["dcat:hasVersion"],"dcat:hasCurrentVersion":this["dcat:hasCurrentVersion"],"dcterms:replaces":this["dcterms:replaces"],"dcat:version":this["dcat:version"],"adms:versionNotes":this["adms:versionNotes"],"adms:status":this["adms:status"],"dcat:first":this["dcat:first"],"dcat:last":this["dcat:last"],"dcat:prev":this["dcat:prev"]}}};var N=class extends R{constructor(t){super(),Object.assign(this,t)}toJSON(){return y(f({},super.toJSON()),{"gx:providedBy":this["gx:providedBy"],"gx:termsAndConditions":this["gx:termsAndConditions"],"dct:license":this["dct:license"],"gx:title":this["gx:title"],"gx:description":this["gx:description"],"dct:issued":this["dct:issued"],"gx:obsoleteDateTime":this["gx:obsoleteDateTime"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":this["gx:dataUsageAgreement"],"gx:aggregationOf":this["gx:aggregationOf"],"dct:identifier":this["dct:identifier"]})}};var x=class extends R{toJSON(){return y(f({},super.toJSON()),{"dcat:distribution":this["dcat:distribution"],"dcterms:accrualPeriodicity":this["dcterms:accrualPeriodicity"],"dcat:inSeries":this["dcat:inSeries"],"dcterms:spatial":this["dcterms:spatial"],"dcat:spatialResolutionInMeters":this["dcat:spatialResolutionInMeters"],"dcterms:temporal":this["dcterms:temporal"],"dcat:temporalResolution":this["dcat:temporalResolution"]})}};var P=class extends x{constructor(t){super(),Object.assign(this,t)}toJSON(){var t;return y(f({},super.toJSON()),{"@type":this["@type"],"dcterms:title":this["dct:title"],"dcterms:description":this["dct:description"],"dct:title":this["dct:title"],"dct:description":this["dct:description"],"dct:distributions":this["dct:distributions"],"dct:identifier":this["dct:identifier"],"dct:issued":this["dct:issued"],"gx:expirationDateTime":this["gx:expirationDateTime"],"dct:license":this["dct:license"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":(t=this["gx:dataUsageAgreement"])==null?void 0:t.map(e=>e.toJSON()),"gx:exposedThrough":this["gx:exposedThrough"]})}};var E=class{constructor(t){this.account=t.account||""}};var H=class{constructor(t){this.name=t.name||"",this.homepage=t.homepage||""}};var z=class{constructor(t){this.name=t.name||"",this.homepage=t.homepage||""}};var I;(a=>{class o extends E{}a.Agent=o;class t extends H{}a.Person=t;class e extends z{}a.Organization=e})(I||(I={}));var v=class{toJSON(){return{"@id":this["@id"],"@type":this["@type"],"dcterms:title":this["dcterms:title"],"dcterms:description":this["dcterms:description"],"dcterms:issued":this["dcterms:issued"],"dcterms:modified":this["dcterms:modified"],"dcterms:license":this["dcterms:license"],"dcterms:accessRights":this["dcterms:accessRights"],"dcterms:rights":this["dcterms:rights"],"odrl:hasPolicy":this["odrl:hasPolicy"],"dcat:accessURL":this["dcat:accessURL"],"dcat:downloadURL":this["dcat:downloadURL"],"dcat:accessService":this["dcat:accessService"],"dcat:byteSize":this["dcat:byteSize"],"dcat:spatialResolutionInMeters":this["dcat:spatialResolutionInMeters"],"dcat:temporalResolution":this["dcat:temporalResolution"],"dcterms:conformsTo":this["dcterms:conformsTo"],"dcat:mediaType":this["dcat:mediaType"],"dcterms:format":this["dcterms:format"],"dcat:compressFormat":this["dcat:compressFormat"],"dcat:packageFormat":this["dcat:packageFormat"]}}};var C=class extends v{constructor(t){super(),Object.assign(this,t)}toJSON(){var t;return y(f({},super.toJSON()),{"dct:title":this["dct:title"],"dct:format":this["dct:format"],"gx:location":this["gx:location"],"gx:hash":this["gx:hash"],"gx:hashAlgorithm":this["gx:hashAlgorithm"],"dct:issued":this["dct:issued"],"gx:expirationDateTime":this["gx:expirationDateTime"],"dcat:language":this["dcat:language"],"dct:license":this["dct:license"],"gx:dataLicensors":this["gx:dataLicensors"],"gx:dataUsageAgreement":(t=this["gx:dataUsageAgreement"])==null?void 0:t.map(e=>e.toJSON())})}};var F=class{};var j;(t=>{class o extends F{}t.Kind=o})(j||(j={}));var L=class extends x{toJSON(){return y(f({},super.toJSON()),{"foaf:homepage":this["foaf:homepage"],"dcat:themeTaxonomy":this["dcat:themeTaxonomy"],"dcat:resource":this["dcat:resource"],"dcat:dataset":this["dcat:dataset"],"dcat:service":this["dcat:service"],"dcat:catalog":this["dcat:catalog"]})}};var J=class extends L{constructor(t){super(),this["gx-trust-framework:getVerifiableCredentialsIDs"]=t["gx-trust-framework:getVerifiableCredentialsIDs"]}toJSON(){return y(f({},super.toJSON()),{"gx-trust-framework:getVerifiableCredentialsIDs":this["gx-trust-framework:getVerifiableCredentialsIDs"]})}};var q=class{constructor(t){this.inScheme=new b.ConceptScheme({}),this.topConceptOf=new b.ConceptScheme({}),this.definition=t.definition}};var K=class{constructor(t){this.themes=t.themes||[],this.themeTaxonomy=t.themeTaxonomy||""}};var b;(e=>{class o extends q{}e.Concept=o;class t extends K{}e.ConceptScheme=t})(b||(b={}));var k=class extends R{};var X=class{mapDataResourceToDataSet(t){var r,s,i,n,c,d,l,p,g,T;let e=new P({"dct:distributions":[],"dct:identifier":t._id,"dct:description":t.description,"dct:issued":(r=t.createdAt)==null?void 0:r.toString(),"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":[],"gx:dataUsageAgreement":[],"gx:expirationDateTime":void 0,"gx:exposedThrough":[]});e["@id"]=t._id,e["odrl:hasPolicy"]=t.policy,e["@type"]="DataResource",e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:creator"]=new I.Agent({account:t.producedBy});let a=new b.ConceptScheme({themes:[],themeTaxonomy:""});if(e["dcat:theme"]=new b.Concept({inScheme:a,topConceptOf:a,definition:t.category}),t.representation){[].push((i=(s=t.representation)==null?void 0:s.url)!=null?i:"");let u=new C({"dcat:language":"","dct:format":"","dct:issued":t.representation.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.producedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region});u["@id"]=(n=t.representation)==null?void 0:n._id,u["@type"]="ptx:representation",u["dcterms:issued"]=(c=t.representation)==null?void 0:c.createdAt,u["dcterms:modified"]=(d=t.representation)==null?void 0:d.updatedAt,u["dcterms:accessRights"]=(l=t.representation)==null?void 0:l.method,u["dcterms:rights"]=(p=t.representation)==null?void 0:p.credential,u["dcat:mediaType"]=(g=t.representation)==null?void 0:g.type,u["dcat:accessURL"]=(T=t.representation)==null?void 0:T.url,e["dct:distributions"].push(u)}if(t.apiResponseRepresentation){let h=new C({"dcat:language":"","dct:format":"","dct:issued":t.apiResponseRepresentation.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.producedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region});h["@id"]=t.apiResponseRepresentation._id,h["@type"]="ptx:apiResponseRepresentation",h["dcterms:modified"]=t.apiResponseRepresentation.updatedAt,h["dcterms:accessRights"]=t.apiResponseRepresentation.method,h["dcterms:rights"]=t.apiResponseRepresentation.credential,h["dcat:mediaType"]=t.apiResponseRepresentation.type,e["dct:distributions"].push(h)}return e}mapSoftwareResourceToDataSet(t){var s;let e=new P({"dct:description":t.description,"dct:distributions":[],"dct:identifier":(s=t._id)!=null?s:"","dct:issued":t.createdAt,"dct:license":t.license,"dct:title":t.name,"gx:dataLicensors":t.providedBy,"gx:dataUsageAgreement":[],"gx:expirationDateTime":void 0,"gx:exposedThrough":[]});e["@id"]=t._id,e["@type"]="SoftwareResource",e["dcterms:modified"]=t.updatedAt,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new I.Agent({account:t.providedBy});let a=new b.ConceptScheme({themes:[],themeTaxonomy:""});e["dcat:theme"]=new b.Concept({inScheme:a,topConceptOf:a,definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:hasPart"]=(t.aggregationOf||[]).map(i=>{let n=new P({"dct:description":"","dct:distributions":[],"dct:identifier":"","dct:title":"","gx:exposedThrough":[]});return n["@id"]=i,n});let r=t.locationAddress.map(i=>i.countryCode);if(e["dcterms:language"]=r.join(";"),t.representation){let i=new C({"dcat:language":"","dct:format":"","dct:issued":"","dct:license":[],"dct:title":"","gx:dataLicensors":[],"gx:dataUsageAgreement":[],"gx:expirationDateTime":"","gx:hash":"","gx:hashAlgorithm":"","gx:location":t.country_or_region||[]});i["@id"]=t.representation._id,i["@type"]="ptx:representation",i["dcat:accessURL"]=t.representation.url,i["dcterms:modified"]=t.representation.updatedAt,i["dcterms:accessRights"]=t.representation.method,i["dcterms:rights"]=t.representation.credential,i["dcat:mediaType"]=t.representation.type,e["dct:distributions"].push(i)}return e}mapServiceOfferingToDataProduct(t){return D(this,null,function*(){var n,c,d,l,p,g,T,h;let e=new I.Agent({account:(n=t.providedBy)!=null?n:""});e.account=(c=t.providedBy)!=null?c:"";let a=new j.Kind;a.url=(d=t.dependsOn)!=null?d:"";let r=[],s=[];for(let u of t.aggregationOf){let O=yield gt.get(u),A=new k;if(A["dcat:hadRole"]=O.data["@type"],A["dcterms:relation"]=u,A["dcterms:description"]=O.data.description,s.push(A),O.data["@type"]==="DataResource"){let m=this.mapDataResourceToDataSet(O.data);r.push(m)}else{let m=this.mapSoftwareResourceToDataSet(O.data);r.push(m)}}let i=new N({"dct:identifier":(l=t._id)!=null?l:"","dct:license":[],"gx:aggregationOf":r,"gx:providedBy":(p=t.providedBy)!=null?p:"","gx:termsAndConditions":t.termsAndConditions,"gx:title":(g=t.name)!=null?g:"","gx:description":(T=t.description)!=null?T:"","odrl:hasPolicy":t.policy,"dct:issued":t.createdAt,"dcat:contactPoint":a,"dcterms:conformsTo":t.termsAndConditions,"gx:obsoleteDateTime":void 0,"gx:dataLicensors":[],"gx:dataUsageAgreement":[]});return i["@type"]="ServiceOffering",i["dcterms:modified"]=t.updatedAt,i["dcat:version"]=t.schema_version,i["dcat:keyword"]=t.keywords.join(";")&&t.category.join(";"),i["gx:aggregationOf"]=r,i["dcterms:creator"]=e,i["dcat:qualifiedRelation"]=s,i["dcterms:creator"]=new I.Agent({account:(h=t.providedBy)!=null?h:""}),i["dcat:contactPoint"]=new j.Kind,i["dcat:contactPoint"].url=t.dependsOn,i["dcterms:conformsTo"]=t.termsAndConditions,i})}mapServiceOfferings(t){return D(this,null,function*(){let e=[];for(let a of t)e.push(yield this.mapServiceOfferingToDataProduct(a));return e})}mapResources(t,e){let a=[];for(let r of t)a.push(this.mapDataResourceToDataSet(r));for(let r of e)a.push(this.mapSoftwareResourceToDataSet(r));return a}mapPtxCatalogToGaiaXCatalog(t){return D(this,null,function*(){let e=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="serviceoffering"}),a=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="dataresource"}),r=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="softwareresource"}),s=new J({"gx-trust-framework:getVerifiableCredentialsIDs":t.map(i=>i._id).join(",")});return s["@context"]="https://w3id.org/dspace/2024/1/context.json",s["@type"]="dcat:Catalog",s["dcat:resource"]=yield this.mapServiceOfferings(e),s["dcat:dataset"]=this.mapResources(a,r),s["foaf:homepage"]="catalog/offers",s})}};var w=class{constructor(t){Object.assign(this,t)}toJSON(){return{representation:this.representation,apiResponseRepresentation:this.apiResponseRepresentation,createdAt:this.createdAt,updatedAt:this.updatedAt,name:this.name,description:this.description,license:this.license,policy:this.policy,producedBy:this.producedBy,schema_version:this.schema_version,country_or_region:this.country_or_region,copyrightOwnedBy:this.copyrightOwnedBy,category:this.category,subCategories:this.subCategories,exposedThrough:this.exposedThrough}}};var U=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,representation:this.representation,apiResponseRepresentation:this.apiResponseRepresentation,createdAt:this.createdAt,updatedAt:this.updatedAt,name:this.name,description:this.description,license:this.license,policy:this.policy,schema_version:this.schema_version,country_or_region:this.country_or_region,copyrightOwnedBy:this.copyrightOwnedBy,category:this.category,subCategories:this.subCategories,exposedThrough:this.exposedThrough,providedBy:this.providedBy,aggregationOf:this.aggregationOf,locationAddress:this.locationAddress,demo_link:this.demo_link}}};var _=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,name:this.name,providedBy:this.providedBy,description:this.description,createdAt:this.createdAt,updatedAt:this.updatedAt,schema_version:this.schema_version,policy:this.policy,keywords:this.keywords,category:this.category,dataResources:this.dataResources,softwareResources:this.softwareResources,location:this.location,aggregationOf:this.aggregationOf,dependsOn:this.dependsOn,termsAndConditions:this.termsAndConditions}}};var S=class{constructor(t){Object.assign(this,t)}toJSON(){return{_id:this._id,type:this.type,resourceID:this.type,url:this.url,method:this.method,credential:this.credential,createdAt:this.createdAt,updatedAt:this.updatedAt,input:this.input,output:this.output,processingTime:this.processingTime}}};var $=class{mapDataSetToDataResource(t){var r,s;if(!t["@id"])throw new Error("dataSet must have an @id property");let e=new w({_id:t["dct:identifier"],name:t["dct:title"],description:t["dct:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],license:t["dct:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],producedBy:(r=t["dcterms:creator"])==null?void 0:r.account,category:(s=t["dcat:theme"])==null?void 0:s.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["gx:exposedThrough"]}),a=t["dct:distributions"];if(Array.isArray(a))for(let i of a){let n=new S({_id:i["@id"],resourceID:t["@id"],url:Array.isArray(i["dcat:accessURL"])?i["dcat:accessURL"][0]:i["dcat:accessURL"],createdAt:i["dct:issued"],updatedAt:i["dcterms:modified"],method:i["dcterms:accessRights"],credential:i["dcterms:rights"],type:i["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=n):e.representation=n}return e}mapDataSetToSoftwareResource(t){var r,s;if(!t["@id"])throw new Error("resource must have an @id property");let e=new U({_id:t["@id"],name:t["dct:title"],description:t["dct:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],license:t["dct:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(r=t["dcterms:creator"])==null?void 0:r.account,category:(s=t["dcat:theme"])==null?void 0:s.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["gx:exposedThrough"]}),a=t["dct:distributions"];if(Array.isArray(a))for(let i of a){let n=new S({_id:i["@id"],resourceID:t["@id"],url:Array.isArray(i["dcat:accessURL"])?i["dcat:accessURL"][0]:i["dcat:accessURL"],createdAt:i["dct:issued"],updatedAt:i["dcterms:modified"],method:i["dcterms:accessRights"],credential:i["dcterms:rights"],type:i["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=n):e.representation=n}return e}mapDataProductToServiceOffering(t){return D(this,null,function*(){var r,s;if(!t["@id"])throw new Error("resource must have an @id property");let e=new _({_id:t["@id"],name:t["gx:title"],description:t["gx:description"],createdAt:t["dct:issued"],updatedAt:t["dcterms:modified"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(r=t["dcterms:creator"])==null?void 0:r.account,category:(s=t["dcat:theme"])==null?void 0:s.definition,termsAndConditions:t["dcterms:conformsTo"]});e.dataResources=[],e.softwareResources=[];let a=t["gx:aggregationOf"];if(Array.isArray(a))for(let i of a)if(i["@type"]==="DataResource"){let n=this.mapDataSetToDataResource(i);e.dataResources.push(n)}else{let n=this.mapDataSetToSoftwareResource(i);e.softwareResources.push(n)}return e})}mapGaiaXCatalogToPtxCatalog(t){return D(this,null,function*(){let e=[],a=[],r=[];if(t["dcat:resource"]&&Array.isArray(t["dcat:resource"]))for(let s of t["dcat:resource"]){let i=yield this.mapDataProductToServiceOffering(s);e.push(i)}if(t["dcat:dataset"]&&Array.isArray(t["dcat:dataset"]))for(let s of t["dcat:dataset"]){let i;s["@type"]==="DataResource"?(i=this.mapDataSetToDataResource(s),a.push(i)):(i=this.mapDataSetToSoftwareResource(s),r.push(i))}return{serviceOfferings:e,dataResources:a,softwareResources:r}})}};import lt from"axios";var B=class extends R{toJSON(){return y(f({},super.toJSON()),{"dcat:endpointURL":this["dcat:endpointURL"],"dcat:endpointDescription":this["dcat:endpointDescription"],"dcat:servesDataset":this["dcat:servesDataset"]})}};var M=class{constructor(t){this.url=t.url}};var G;(t=>{class o extends M{}t.Kind=o})(G||(G={}));var Q=class{mapDataResourceToDataService(t){var a,r,s,i,n,c,d,l,p,g,T,h,u,O;let e=new B;if(e["@id"]=t._id,e["@type"]="DataResource",e["dcterms:title"]=t.name,e["dcterms:description"]=t.description,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcterms:license"]=t.license,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new I.Agent({account:t.producedBy}),e["dcat:theme"]=new b.Concept({definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcat:endpointURL"]=t.exposedThrough,e["dcat:servesDataset"]=[],t.representation){let A=new x,m=new v;m["dcat:accessURL"]=(a=t.representation)==null?void 0:a.url,m["@id"]=(r=t.representation)==null?void 0:r._id,m["@type"]="ptx:representation",m["dcterms:issued"]=(s=t.representation)==null?void 0:s.createdAt,m["dcterms:modified"]=(i=t.representation)==null?void 0:i.updatedAt,m["dcterms:accessRights"]=(n=t.representation)==null?void 0:n.method,m["dcterms:rights"]=(c=t.representation)==null?void 0:c.credential,m["dcat:mediaType"]=(d=t.representation)==null?void 0:d.type,A["dcat:distribution"]=m,e["dcat:servesDataset"].push(A)}if(t.apiResponseRepresentation){let A=new x,m=new v;m["dcat:accessURL"]=(l=t.apiResponseRepresentation)==null?void 0:l.url,m["@id"]=(p=t.apiResponseRepresentation)==null?void 0:p._id,m["@type"]="ptx:apiResponseRepresentation",m["dcterms:issued"]=(g=t.apiResponseRepresentation)==null?void 0:g.createdAt,m["dcterms:modified"]=(T=t.apiResponseRepresentation)==null?void 0:T.updatedAt,m["dcterms:accessRights"]=(h=t.apiResponseRepresentation)==null?void 0:h.method,m["dcterms:rights"]=(u=t.apiResponseRepresentation)==null?void 0:u.credential,m["dcat:mediaType"]=(O=t.apiResponseRepresentation)==null?void 0:O.type,A["dcat:distribution"]=m,e["dcat:servesDataset"].push(A)}return e}mapSoftwareResourceToDataService(t){var r,s,i,n,c,d,l;let e=new B;e["@id"]=t._id,e["@type"]="SoftwareResource",e["dcterms:title"]=t.name,e["dcterms:description"]=t.description,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcterms:license"]=t.license,e["dcat:version"]=t.schema_version,e["odrl:hasPolicy"]=t.policy,e["dcterms:creator"]=new I.Agent({account:t.providedBy}),e["dcat:theme"]=new b.Concept({definition:t.category}),e["dcterms:rights"]=t.copyrightOwnedBy,e["dcterms:hasPart"]=(t.aggregationOf||[]).map(p=>{let g=new x;return g["@id"]=p,g});let a=t.locationAddress.map(p=>p.countryCode);if(e["dcterms:language"]=a.join(";"),e["dcat:endpointURL"]=t.exposedThrough,e["dcat:endpointDescription"]=t.demo_link,e["dcat:servesDataset"]=[],t.representation){let p=new x,g=new v;g["dcat:accessURL"]=(r=t.representation)==null?void 0:r.url,g["@id"]=(s=t.representation)==null?void 0:s._id,g["@type"]="ptx:representation",g["dcterms:issued"]=(i=t.representation)==null?void 0:i.createdAt,g["dcterms:modified"]=(n=t.representation)==null?void 0:n.updatedAt,g["dcterms:accessRights"]=(c=t.representation)==null?void 0:c.method,g["dcterms:rights"]=(d=t.representation)==null?void 0:d.credential,g["dcat:mediaType"]=(l=t.representation)==null?void 0:l.type,p["dcat:distribution"]=g,e["dcat:servesDataset"].push(p)}return e}mapServiceOfferingToDataSet(t){return D(this,null,function*(){var s,i,n;let e=new x,a=[],r=[];for(let c of t.aggregationOf){let d=yield lt.get(c),l=new k;if(l["dcat:hadRole"]=d.data["@type"],l["dcterms:relation"]=c,l["dcterms:description"]=d.data.description,r.push(l),d.data.representation){let p=new v;p["dcat:accessURL"]=d.data.representation.url,p["dcat:mediaType"]=d.data.representation.fileType,p["dcat:accessService"]=d.data["@type"]==="SoftwareResource"?this.mapSoftwareResourceToDataService(d.data):d.data["@type"]==="DataResource"?this.mapDataResourceToDataService(d.data):new B,a.push(p)}if(d.data.apiResponseRepresentation){let p=new v;p["dcat:accessURL"]=d.data.apiResponseRepresentation.url,p["dcat:mediaType"]=d.data.apiResponseRepresentation.fileType,p["dcat:accessService"]=d.data["@type"]==="SoftwareResource"?this.mapSoftwareResourceToDataService(d.data):d.data["@type"]==="DataResource"?this.mapDataResourceToDataService(d.data):new B,a.push(p)}}return e["@id"]=t._id,e["@type"]="ServiceOffering",e["dcterms:title"]=(s=t.name)!=null?s:"",e["dcterms:description"]=(i=t.description)!=null?i:"",e["dcterms:identifier"]=t._id,e["odrl:hasPolicy"]=t.policy,e["dcterms:issued"]=t.createdAt,e["dcterms:modified"]=t.updatedAt,e["dcat:version"]=t.schema_version,e["dcat:keyword"]=t.keywords.join(";")&&t.category.join(";"),e["dcterms:hasPart"]=t.aggregationOf,e["dcat:distribution"]=a,e["dcat:qualifiedRelation"]=r,e["dcterms:creator"]=new I.Agent({account:(n=t.providedBy)!=null?n:""}),e["dcterms:spatial"]=t.location,e["dcat:contactPoint"]=new G.Kind(t.dependsOn),e["dcterms:conformsTo"]=t.termsAndConditions,e})}mapServiceOfferings(t){return D(this,null,function*(){let e=[];for(let a of t)e.push(yield this.mapServiceOfferingToDataSet(a));return e})}mapResources(t,e){let a=[];for(let r of t)a.push(this.mapDataResourceToDataService(r));for(let r of e)a.push(this.mapSoftwareResourceToDataService(r));return a}mapPtxCatalogToDcatCatalog(t){return D(this,null,function*(){let e=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="serviceoffering"}),a=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="dataresource"}),r=t.filter(i=>{var n;return((n=i["@type"])==null?void 0:n.toLowerCase())==="softwareresource"}),s=new L;return s["@context"]="https://w3id.org/dspace/2024/1/context.json",s["@type"]="dcat:Catalog",s["dcat:dataset"]=yield this.mapServiceOfferings(e),s["dcat:service"]=this.mapResources(a,r),s["foaf:homepage"]="catalog/offers",s})}};var W=class{mapDataServiceToDataResource(t){var r,s,i;if(!t["@id"])throw new Error("DataService must have an @id property");let e=new w({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],license:t["dcterms:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],producedBy:(r=t["dcterms:creator"])==null?void 0:r.account,category:(s=t["dcat:theme"])==null?void 0:s.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["dcat:endpointURL"]}),a=(i=t["dcat:servesDataset"])!=null?i:[];for(let n of a){let c=n["dcat:distribution"];if(!c)continue;if(Array.isArray(c))throw new Error("Distribution cannot be an array");let d=new S({_id:c["@id"],resourceID:t["@id"],url:Array.isArray(c["dcat:accessURL"])?c["dcat:accessURL"][0]:c["dcat:accessURL"],createdAt:c["dcterms:issued"],updatedAt:c["dcterms:modified"],method:c["dcterms:accessRights"],credential:c["dcterms:rights"],type:c["dcat:mediaType"]});e.representation?e.apiResponseRepresentation||(e.apiResponseRepresentation=d):e.representation=d}return e}mapDataServiceToSoftwareResource(t){var r,s,i;if(!t["@id"])throw new Error("DataService must have an @id property");let e=new U({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],license:t["dcterms:license"],schema_version:t["dcat:version"],policy:t["odrl:hasPolicy"],providedBy:(r=t["dcterms:creator"])==null?void 0:r.account,category:(s=t["dcat:theme"])==null?void 0:s.definition,copyrightOwnedBy:t["dcterms:rights"],exposedThrough:t["dcat:endpointURL"]}),a=(i=t["dcat:servesDataset"])!=null?i:[];for(let n of a){let c=n["dcat:distribution"];if(!c)continue;if(Array.isArray(c))throw new Error("Distribution cannot be an array");let d=new S({_id:c["@id"],resourceID:t["@id"],url:Array.isArray(c["dcat:accessURL"])?c["dcat:accessURL"][0]:c["dcat:accessURL"],createdAt:c["dcterms:issued"],updatedAt:c["dcterms:modified"],method:c["dcterms:accessRights"],credential:c["dcterms:rights"],type:c["dcat:mediaType"]});e.representation||(e.representation=d)}return e}mapDataSetToServiceOffering(t){var a,r;let e=new _({_id:t["@id"],name:t["dcterms:title"],description:t["dcterms:description"],policy:t["odrl:hasPolicy"],createdAt:t["dcterms:issued"],updatedAt:t["dcterms:modified"],schema_version:t["dcat:version"],keywords:t["dcat:keyword"],aggregationOf:t["dcterms:hasPart"]});if(Array.isArray(e.aggregationOf))e.aggregationOf=e.aggregationOf.map(s=>s["@id"]);else{let s=e.aggregationOf["@id"];e.aggregationOf=[],e.aggregationOf.push(s)}return e.providedBy=(a=t["dcterms:creator"])==null?void 0:a.account,e.location=t["dcterms:spatial"],e.dependsOn=(r=t["dcat:contactPoint"])==null?void 0:r.url,e.termsAndConditions=t["dcterms:conformsTo"],e}mapDcatCatalogToPtxCatalog(t){let e=[],a=[],r=[];if(t["dcat:dataset"]&&Array.isArray(t["dcat:dataset"]))for(let s of t["dcat:dataset"]){let i=this.mapDataSetToServiceOffering(s);e.push(i)}if(t["dcat:service"]&&Array.isArray(t["dcat:service"]))for(let s of t["dcat:service"]){let i;s["@type"]==="DataResource"?(i=this.mapDataServiceToDataResource(s),a.push(i)):(i=this.mapDataServiceToSoftwareResource(s),r.push(i))}return{serviceOfferings:e,dataResources:a,softwareResources:r}}};var Y=class{constructor(t){Object.assign(this,t)}};var V=class{constructor(t){Object.assign(this,t)}toJSON(){return JSON.stringify(this,null,2)}};var Z=class{mapDataOfferingToDataResource(t){var r;if(!t._id)throw new Error("DataResource must have an _id property");let e=t.policy.filter(s=>s.policy.permission.some(i=>i.action==="use")),a=t.policy.filter(s=>s.policy.permission.some(i=>i.action==="access"));return new V({"@context":{"gax-validation":"https://w3id.org/gaia-x/validation#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",sh:"http://www.w3.org/ns/shacl#",simpl:"https://w3id.org/simpl#",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#"},"@id":t._id,"rdf:type":{"@id":"simpl:DataOffering"},"simpl:billingSchema":{"@type":{"@id":"simpl:BillingSchema"},"simpl:billingSchemaDocument":"","simpl:billingSchemaHashAlg":"","simpl:billingSchemaHashValue":"","simpl:billingSchemaURL":""},"simpl:contractTemplate":{"@type":{"@id":"simpl:ContractTemplate"},"simpl:contractTemplateDocument":"","simpl:contractTemplateHashAlg":"","simpl:contractTemplateHashValue":"","simpl:contractTemplateURL":""},"simpl:dataProperties":{"@type":{"@id":"simpl:DataProperties"},"simpl:format":"","simpl:providerDataAddress":""},"simpl:generalServiceProperties":{"@type":{"@id":"simpl:GeneralServiceProperties"},"simpl:description":t.description||"","simpl:inLanguage":"en","simpl:name":t.name||"","simpl:offeringType":"DataOffering","simpl:serviceAccessPoint":{"@type":"xsd:anyURI","@value":t.exposedThrough||""}},"simpl:offeringPrice":{"@type":{"@id":"simpl:OfferingPrice"},"simpl:currency":"EUR","simpl:license":{"@type":"xsd:anyURI","@value":((r=t.license)==null?void 0:r[0])||""},"simpl:price":{"@type":"xsd:decimal","@value":0},"simpl:priceType":"Free"},"simpl:providerInformation":{"@type":{"@id":"simpl:ProviderInformation"},"simpl:contact":"","simpl:providedBy":t.producedBy||"","simpl:signature":""},"simpl:servicePolicy":{"@type":{"@id":"simpl:ServicePolicy"},"simpl:access-policy":JSON.stringify(a)||"","simpl:usage-policy":JSON.stringify(e)||""},"simpl:slaAgreements":{"@type":{"@id":"simpl:SlaAgreements"},"simpl:slaAgreementsDocument":"","simpl:slaAgreementsHashAlg":"","simpl:slaAgreementsHashValue":"","simpl:slaAgreementsURL":""}})}};var tt=class{mapDataOfferingToDataResource(t){if(!t["@id"])throw new Error("DataOffering must have an @id property");return new w({_id:t["@id"],name:t["simpl:generalServiceProperties"]["simpl:name"],description:t["simpl:generalServiceProperties"]["simpl:description"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),license:[t["simpl:offeringPrice"]["simpl:license"]["@value"]],schema_version:"",policy:[t["simpl:servicePolicy"]["simpl:access-policy"],t["simpl:servicePolicy"]["simpl:usage-policy"]],producedBy:t["simpl:providerInformation"]["simpl:providedBy"],category:"",copyrightOwnedBy:[],exposedThrough:[t["simpl:generalServiceProperties"]["simpl:serviceAccessPoint"]["@value"]],representation:new S({_id:`${t["@id"]}_representation`,resourceID:t["@id"],type:"REST",url:t["simpl:generalServiceProperties"]["simpl:serviceAccessPoint"]["@value"],method:"none",credential:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})}};var et=class{constructor(t){Object.assign(this,t)}toJSON(){return{endpoint:this.endpoint,resourceId:this.resourceId,type:this.type,enabled:this.enabled}}};var it=class{constructor(t){Object.assign(this,t)}toJSON(){return{"gx:providedBy":this["gx:providedBy"],"gx:consumedBy":this["gx:consumedBy"],"gx:dataProduct":this["gx:dataProduct"],"gx:signers":this["gx:signers"].map(t=>t.toJSON()),"gx:termOfUsage":this["gx:termOfUsage"],"gx:notarizedIn":this["gx:notarizedIn"],"gx:dataUsage":this["gx:dataUsage"]}}};var st=class{constructor(t){Object.assign(this,t)}toJSON(){return{"gx:dataProductUsageContract":this["gx:dataProductUsageContract"],"gx:dataUsage":this["gx:dataUsage"]}}};var rt=class{};export{et as Catalog,rt as Checksum,Y as ContractTemplate,v as DSPDistribution,J as DataCatalog,V as DataOffering,N as DataProduct,it as DataProductUsageContract,S as DataRepresentation,w as DataResource,P as DataSet,st as DataTransaction,W as DcatToPtxConvertor,C as Distribution,$ as GaiaXToPtxConvertor,Q as PtxToDcatConvertor,X as PtxToGaiaXConvertor,Z as PtxToSimplConvertor,R as Resource,_ as ServiceOffering,tt as SimplToPtxConvertor,U as SoftwareResource};
//# sourceMappingURL=index.mjs.map